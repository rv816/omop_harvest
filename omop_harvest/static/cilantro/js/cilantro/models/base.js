define(["underscore","backbone"],function(s,e){var n=e.Model.extend({constructor:function(n,t){t=s.defaults({parse:!0},t),this.links={},e.Model.prototype.constructor.call(this,n,t),this.on("change:_links",this._parseLinks)},url:function(){return this.isNew()?e.Model.prototype.url.call(this):this.links.self},_parseLinks:function(e,n){var t={};s.each(n,function(s,e){t[e]=s.href}),e.links=t},parse:function(s){return s&&s._links&&this._parseLinks(this,s._links),s}}),t=e.Collection.extend({model:n}),i=t.extend({initialize:function(){this.session=this.add({session:!0})},reset:function(s,n){n=n||{},s=s||[];for(var i,o,r=0;r<s.length;r++)if(i=s[r],i instanceof e.Model?i.get("session")===!0&&(o=i.toJSON()):i&&i.session===!0&&(o=i),o){this.session.set(o,n),s.splice(r,1);break}return s.push(this.session),t.prototype.reset.call(this,s,n)},get:function(s){var n=!1;return s instanceof e.Model&&(n=s.get("session")),("session"===s||"object"==typeof s&&s.session)&&(n=!0),n?this.findWhere({session:!0}):t.prototype.get.call(this,s)},getSession:function(){return this.session}});return{Model:n,Collection:t,SessionCollection:i}});
//# sourceMappingURL=base.js.map